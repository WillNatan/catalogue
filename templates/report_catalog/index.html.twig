{% extends 'admin/base.html.twig' %}

{% block title %}Catalogue des rapports BO{% endblock %}
{% block css %}
    <link rel="stylesheet" href="{{ asset('dashboard/css/datatablesRowOrder.css') }}">
    <link rel="stylesheet" href="{{ asset('dashboard/css/datatablesResponsive.css') }}">
{% endblock %}
{% block body %}

    <div class="row">
        <div class="col-12">
            <div class="db-box bg-darker">
                <h1 class="mt-5">Catalogue des rapports BO</h1>
                <div class="db-box-body">
                    <a href="{{ path('spreadsheet') }}"><button class="gradient-btn"><i class="fa fa-file-excel"></i> Excel</button></a>
                    <a href="{{ path('Nouveau-rapport') }}" class="btn gradient-btn-primary"><i class=" fas fa-plus"></i></a>
                        <table class="mdl-data-table" style="width:100%" id="dataTable">
                            <thead>
                            <tr>
                                <th>N°</th>
                                <th>Créateur</th>
                                <th>Dossier</th>
                                <th>Sous-dossier</th>
                                <th>Nom du rapport</th>
                                <th>Version actuelle</th>
                                <th>Catégorie</th>
                                <th>actions</th>
                            </tr>
                            </thead>
                            <tbody>
                            {% for report_catalog in report_catalogs %}
                                <tr class="test">
                                    <td>{{ report_catalog.n }}</td>
                                    <td>{{ report_catalog.createdBy.username }}</td>
                                    <td>{% if report_catalog.mainFolder %}{{ report_catalog.mainFolder.nomDossier }}{% endif %}</td>
                                    <td>{{ report_catalog.subFolder }}</td>
                                    <td>{{ report_catalog.NomRapport }}</td>
                                    <td>{{ report_catalog.VersionActuelle }}</td>
                                    <td>
                                        {{ report_catalog.Categorie }}
                                    </td>
                                    <td>
                                        <div class="d-flex">
                                            <a href="{{ path('Détails-rapport', {'id': report_catalog.id}) }}" class="btn gradient-btn-primary mr-1"><i class="fas fa-eye"></i></a>
                                            <a href="{{ path('Modifier-rapport', {'id': report_catalog.id}) }}" class="btn gradient-btn mr-1"><i class="fas fa-edit"></i></a>
                                        </div>
                                    </td>
                                </tr>
                            {% else %}
                                <tr>
                                    <td colspan="14" class="text-center">Aucun résultat</td>
                                </tr>
                            {% endfor %}
                            </tbody>
                        </table>

                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block js %}
    <script src="{{ asset('dashboard/js/datatablesResponsive.js') }}"></script>
    <script src="{{ asset('dashboard/js/datatalesRowOrder.js') }}"></script>
  <script>
      // Call the dataTables jQuery plugin
$(document).ready(function() {
    $('#dataTable').DataTable({
        dom: 'Bfrtip',
        "language":{
            "url":"//cdn.datatables.net/plug-ins/1.10.20/i18n/French.json"
        },
        responsive: true,
    });
  });
  
  </script>
  {% endblock %}